====================================================================================================
                         ğŸ•µï¸ SURGEON SCANNER - DETEKSI MONOLITH & HUB LEGACY                         
                    Kriteria: File > 1 Fungsi Utama OR __init__.py dengan Logika                    
                                 Generated on: 2026-01-08 02:43:59                                  
====================================================================================================

----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\backup.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 2 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 2
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: Archiver
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __init__, _get_line_count, clean_pycache, clean_python_comments, clean_js_vue_comments, limit_newlines, _generate_header_block, process_source_files, get_content_backup_files, format_backup_content, run_backup_cycle

   âœ‚ï¸  CANDIDATE 2: main
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : os
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\fac_factory.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 2 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 2
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _owner_default_namespace
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (owner_id: str, engine_id: str)

   âœ‚ï¸  CANDIDATE 2: build_fac_for_owner
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (request_user: User, engine: RegisteredEngine, intent: str)
       ğŸ“¦ IMPORTS    : Any, Dict, FAC_TTL_SECONDS, RegisteredEngine, User, sign_fac_dict, time, validate_fac_budget, validate_fac_ttl
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: DEFAULT_BUDGET, MAX_BUDGET
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\globals.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 3 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 3
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: EngineManager
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __init__, perform_health_checks, get_next_core_server, load_servers

   âœ‚ï¸  CANDIDATE 2: perform_health_checks
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (app)
       âš ï¸ GLOBAL VARS: globals_instance
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: Globals
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __init__, get_core_client


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\metrics.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 2 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 2
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: register_metrics
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (app)
       ğŸ“¦ IMPORTS    : Blueprint, CONTENT_TYPE_LATEST, Response, generate_latest
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: init_app_metrics
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (app)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\sharing_fac.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 2 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 2
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _owner_anchored_namespace
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (owner_id: str, engine_id: str, recipient_id: str)

   âœ‚ï¸  CANDIDATE 2: build_fac_for_shared_engine
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (request_user: User, engine: RegisteredEngine)
       ğŸ“¦ IMPORTS    : Any, Dict, EngineShare, FAC_TTL_SECONDS, RegisteredEngine, User, sign_fac_dict, time, validate_fac_budget, validate_fac_ttl
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: DEFAULT_BUDGET, MAX_BUDGET
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\singleton.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 3 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 3
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: SingletonMeta
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __call__, set_instance, get_instance

   âœ‚ï¸  CANDIDATE 2: _GlobalHandle
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : set_instance, get_instance

   âœ‚ï¸  CANDIDATE 3: Singleton
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __new__


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\sockets.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 60 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 60
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _redact_content
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (text: str)
       ğŸ“¦ IMPORTS    : re
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: _safe_get_session
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (sid: str, namespace: str)
       ğŸ“¦ IMPORTS    : sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: _inject_fac_if_needed
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (session, user_id: str, engine_id: str, payload: dict)
       ğŸ“¦ IMPORTS    : RegisteredEngine, User, build_fac_for_shared_engine
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: _broadcast_response
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine_id: str, event_name: str, data)
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, current_app, get_db_session, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 5: _resolve_sid_via_share_token
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (session, share_token)
       ğŸ“¦ IMPORTS    : WorkflowShare, current_app, find_active_engine_session, globals_instance, joinedload
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 6: on_engine_connect
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (auth)
       ğŸ“¦ IMPORTS    : RegisteredEngine, check_password_hash, current_app, get_db_session, globals_instance, join_room, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 7: on_engine_disconnect
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : AgentSession, UserEngineSession, current_app, datetime, get_db_session, globals_instance, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 8: handle_engine_ready
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : UserEngineSession, current_app, datetime, get_db_session, globals_instance, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 9: handle_engine_vitals_update
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : UserEngineSession, current_app, datetime, find_active_engine_session, get_db_session, globals_instance, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 10: _emit_to_gui
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (user_id: str, event_name: str, data)
       ğŸ“¦ IMPORTS    : current_app, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 11: on_engine_response_component_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 12: on_engine_response_variables
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 13: on_engine_response_presets_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 14: on_engine_response_ai_status
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 15: on_engine_response_datasets_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 16: on_engine_response_local_models
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 17: on_engine_response_training_job_status
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 18: on_engine_component_install_status
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 19: on_engine_response_settings
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 20: on_engine_filesystem_response
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 21: on_forward_event_to_gui
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, globals_instance, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: g_engine_active_job, g_execution_ownership, g_job_ownership
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 22: on_gui_connect
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (auth)
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, User, current_app, datetime, generate_password_hash, get_db_session, globals_instance, join_room, joinedload, json, request, secrets, sio, uuid, verify_web3_signature
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 23: on_gui_disconnect
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : current_app, leave_room, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 24: _resolve_target_engine_sid
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (session, user_id, target_engine_id)
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, current_app, find_active_engine_session, globals_instance
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 25: on_request_presets_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 26: on_request_variables
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 27: on_request_components_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 28: on_filesystem_list_request
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 29: on_request_settings
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 30: on_save_settings
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 31: on_update_variable
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 32: on_delete_variable
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 33: on_request_prompts_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 34: on_update_prompt
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 35: on_delete_prompt
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 36: on_request_ai_status
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 37: on_request_datasets_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 38: on_request_local_models
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 39: on_request_training_job_status
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 40: on_execute_workflow
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: g_execution_ownership, g_job_ownership
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 41: on_execute_standalone_node
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: g_execution_ownership, g_job_ownership
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 42: on_stop_workflow
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 43: on_pause_workflow
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 44: on_save_preset
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 45: on_delete_preset
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 46: on_load_preset
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : RegisteredEngine, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 47: on_engine_response_load_preset
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 48: on_install_component
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 49: on_uninstall_component
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 50: on_gui_catch_all
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (event, data)
       ğŸ“¦ IMPORTS    : current_app, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 51: on_gui_join_session
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : AgentSession, EngineShare, check_password_hash, current_app, get_db_session, join_room, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 52: on_gui_input
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : AgentSession, current_app, get_db_session, globals_instance, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 53: on_core_agent_status
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : AgentSession, current_app, get_db_session, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 54: on_core_agent_token
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 55: on_core_agent_tool
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 56: on_core_agent_done
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : AgentSession, Episode, current_app, datetime, get_db_session, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 57: on_core_agent_error
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : AgentSession, current_app, datetime, get_db_session, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 58: on_core_request_swarm_task
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, globals_instance, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: g_swarm_task_registry
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 59: on_core_swarm_task_result
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: g_swarm_task_registry
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 60: on_muscle_event
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\__init__.py
ğŸ·ï¸  STATUS: LEGACY HUB / ROUTER
ğŸ“Š BEBAN : 2 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 2
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _configure_logging
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()

   âœ‚ï¸  CANDIDATE 2: create_app
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (config_class)
       ğŸ“¦ IMPORTS    : CORS, Flask, app, configure_logging, db_router, drain_bp, gateway_db, guard_runtime, health_bp, init_drain_state, init_pragma, jsonify, logging, make_response, migrate, os, register_metrics, request, send_from_directory, socketio, start_exporter_thread
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: limiter
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\capsules\registry.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 7 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 7
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _sanitize_capsule_id
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (capsule_id: str)

   âœ‚ï¸  CANDIDATE 2: _capsule_path
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (capsule_id: str)
       ğŸ“¦ IMPORTS    : Path
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: CAPSULE_DIR
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: list_capsules
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : Any, Dict, List, json
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: CAPSULE_DIR
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 4: get_capsule
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (capsule_id: str)
       ğŸ“¦ IMPORTS    : Any, Dict, json
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 5: install_capsule
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (capsule: Dict[str, Any])
       ğŸ“¦ IMPORTS    : Any, Dict, json, os, validate_capsule
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 6: export_capsule
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (capsule_id: str)
       ğŸ“¦ IMPORTS    : Any, Dict
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 7: remix_capsule
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (base_capsule_id: str, new_capsule_id: str, patch: Dict[str, Any])
       ğŸ“¦ IMPORTS    : Any, Dict, validate_capsule
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\capsules\renderer.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 3 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 3
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _map_path_prefix
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (scope: Dict[str, Any])
       ğŸ“¦ IMPORTS    : Any, Dict, os
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: CAPSULE_REPO_DIR
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: _normalize_capabilities
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (caps: List[Dict[str, Any]])
       ğŸ“¦ IMPORTS    : Any, Dict, List
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: fac_from_capsule
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (user: Dict[str, Any], engine: Dict[str, Any], capsule: Dict[str, Any])
       ğŸ“¦ IMPORTS    : Any, Dict, os, sign_fac_dict, time, validate_fac_budget, validate_fac_ttl
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\capsules\schema.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 2 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 2
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _require
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (d: Dict[str, Any], key: str, typ)
       ğŸ“¦ IMPORTS    : Any, Dict
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: validate_capsule
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (capsule: Dict[str, Any])
       ğŸ“¦ IMPORTS    : Any, Dict
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: ALLOWED_CAPABILITIES
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\cluster\peers.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 9 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 9
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _parse_peers
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (raw: str)
       ğŸ“¦ IMPORTS    : Dict, urlparse
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: _init_peers
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: SELF_ID, SELF_URL, _RAW
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: get_peer_map
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : Dict
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: get_candidate_ids
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : List
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 5: get_all_up_candidates
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : List
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 6: get_url_for
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (peer_id: str)

   âœ‚ï¸  CANDIDATE 7: peers_state
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : Dict
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 8: _ping_once
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (url: str, timeout: float)
       ğŸ“¦ IMPORTS    : Tuple, requests, time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: _PING_PATH
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 9: _health_loop
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (interval: float)
       ğŸ“¦ IMPORTS    : time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: log
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\cluster\sticky.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 3 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 3
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _score
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (key: str, node_id: str, weight: float)
       ğŸ“¦ IMPORTS    : hashlib
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: pick_home_gateway
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (key: str, candidates: List[str])
       ğŸ“¦ IMPORTS    : List, Optional
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: is_home_gateway
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (key: str, candidates: List[str])
       ğŸ“¦ IMPORTS    : List
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: SELF_ID
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\db\pragma.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 4 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 4
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _apply_pragmas_on_connect
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (dbapi_connection, connection_record)
       âš ï¸ GLOBAL VARS: PRAGMAS, log
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: init_pragma
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (app: Flask, db_instance: SQLAlchemy)
       ğŸ“¦ IMPORTS    : Flask, SQLAlchemy, event
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: log
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: apply_pragma_on_connect
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine: Engine)
       ğŸ“¦ IMPORTS    : Engine, text
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: PRAGMAS, log
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 4: apply_sqlite_pragmas
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (db_path: str)
       ğŸ“¦ IMPORTS    : os, sqlite3
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: PRAGMAS, log
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\db\router.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 3 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 3
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _apply_pragmas
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (con: sqlite3.Connection)
       ğŸ“¦ IMPORTS    : sqlite3
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: PRAGMAS
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: _db_path
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine_id: str)
       ğŸ“¦ IMPORTS    : os
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: DATA_DIR
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: ShardManager
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __init__, init_app, get_connection, ensure_engine_schema


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\engine\heartbeat_api.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 2 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 2
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: heartbeat
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : Engine, current_app, db, globals_instance, jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: engine_hb_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: cleanup_stale_engines
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : current_app, db, jsonify, os, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: engine_hb_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\engine\registry.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 5 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 5
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _conn
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : sqlite3
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: DB_PATH
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: EngineNode
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __init__

   âœ‚ï¸  CANDIDATE 3: EngineRegistry
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __init__, register_engine, unregister_engine, get_engine_by_sid, update_engine_status, get_active_engines

   âœ‚ï¸  CANDIDATE 4: list_up_engines
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : Dict
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: engine_registry
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 5: get_engine_url
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine_id: str)
       ğŸ“¦ IMPORTS    : Optional, globals_instance
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: engine_registry
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\engine\router.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 2 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 2
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: EngineNamespace
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : on_connect, on_disconnect, on_engine_heartbeat, on_response_component_list, on_response_presets_list

   âœ‚ï¸  CANDIDATE 2: GuiNamespace
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : on_connect, on_request_components_list, on_request_presets_list, on_gui_command


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\etl\exporter.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 2 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 2
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _export_once
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : mark_sent, pull_batch, requests
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: ETL_API_KEY, ETL_URL, log
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: start_exporter_thread
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (app)
       ğŸ“¦ IMPORTS    : init_outbox_schema, threading, time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: ETL_INTERVAL, log
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\etl\outbox.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 5 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 5
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _conn
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : sqlite3
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: DB_PATH
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: init_outbox_schema
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()

   âœ‚ï¸  CANDIDATE 3: enqueue_event
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (topic: str, payload: Dict[str, Any])
       ğŸ“¦ IMPORTS    : Any, Dict, json, time, uuid
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: pull_batch
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (limit: int)

   âœ‚ï¸  CANDIDATE 5: mark_sent
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (ids)
       ğŸ“¦ IMPORTS    : time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\helpers\__init__.py
ğŸ·ï¸  STATUS: LEGACY HUB / ROUTER
ğŸ“Š BEBAN : 23 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 23
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: HelpersHub
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __init__, execute_sync, execute

   âœ‚ï¸  CANDIDATE 2: get_db
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: get_db_session
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 4: get_request_data
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 5: verify_web3_signature
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 6: get_user_id_from_token
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 7: is_valid_uuid
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 8: get_base_url
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 9: emit_error
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 10: emit_success
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 11: get_user_id_from_sid
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 12: crypto_auth_required
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (f)
       ğŸ“¦ IMPORTS    : wraps
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 13: admin_token_required
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (f)
       ğŸ“¦ IMPORTS    : wraps
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 14: engine_auth_required
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (f)
       ğŸ“¦ IMPORTS    : wraps
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 15: find_active_engine_session_by_user_id
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 16: find_active_engine_session_wrapper
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 17: get_user_permissions
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 18: find_specific_active_engine_session
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 19: forward_request_to_engine
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 20: forward_http_request_to_engine_api
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 21: engine_api_proxy_decorator
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (f)
       ğŸ“¦ IMPORTS    : wraps
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 22: forward_generic_request
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 23: inject_user_data_to_core
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (*args, **kwargs)
       âš ï¸ GLOBAL VARS: hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\idem\store.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 3 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 3
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _conn
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : sqlite3
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: DB_PATH
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: init_idem_schema
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       âš ï¸ GLOBAL VARS: log
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: IdemStore
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __init__, check_and_store, remember, lookup


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\models\user.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 6 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 6
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: User
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __repr__

   âœ‚ï¸  CANDIDATE 2: RegisteredEngine
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : 

   âœ‚ï¸  CANDIDATE 3: Subscription
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : 

   âœ‚ï¸  CANDIDATE 4: EngineShare
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : 

   âœ‚ï¸  CANDIDATE 5: Role
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : 

   âœ‚ï¸  CANDIDATE 6: Permission
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : 


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\ops\chaos.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 3 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 3
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _is_chaos_enabled
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: maybe_chaos
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : os, random, time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: chaos_ping
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       âš ï¸ GLOBAL VARS: chaos_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\ops\drain.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 6 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 6
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: init_drain_state
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (app)

   âœ‚ï¸  CANDIDATE 2: _get_state
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : Any, Dict, current_app
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: is_draining
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : current_app
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: _require_admin
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : os, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 5: drain_status
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: drain_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 6: drain_toggle
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : current_app, jsonify, request, time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: drain_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\queue\api.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 18 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 18
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _bool_env
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (name: str, default: bool)
       ğŸ“¦ IMPORTS    : os
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: _import_backend
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : current_app
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: _backend_module
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : current_app
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: _prepare_kwargs
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (fn, **kwargs)
       ğŸ“¦ IMPORTS    : inspect
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 5: _call_backend
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (fn_names: List[str], **kwargs)
       ğŸ“¦ IMPORTS    : Any, List, Tuple, current_app
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 6: _make_idem_key
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine_id: str, idem_key: str)

   âœ‚ï¸  CANDIDATE 7: _idem_local_get
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (k: str)
       ğŸ“¦ IMPORTS    : Any, Dict, Optional, time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: _IDEM_TTL_S, _idem_lock
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 8: _idem_local_put
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (k: str, payload: Dict[str, Any])
       ğŸ“¦ IMPORTS    : Any, Dict, time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: _idem_lock
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 9: _http_get_json
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (url: str, headers: Dict[str, str])
       ğŸ“¦ IMPORTS    : Any, Dict, Optional, Tuple, json
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 10: _http_post_json
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (url: str, headers: Dict[str, str], obj: Dict[str, Any])
       ğŸ“¦ IMPORTS    : Any, Dict, json
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 11: _global_idem_get
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (k: str)
       ğŸ“¦ IMPORTS    : Any, Dict, Optional
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: IDEM_API_KEY, IDEM_GLOBAL_URL
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 12: _global_idem_put
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (k: str, payload: Dict[str, Any], ttl_s: int)
       ğŸ“¦ IMPORTS    : Any, Dict
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: IDEM_API_KEY, IDEM_GLOBAL_URL
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 13: _rate_limit_engine
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine_id: str)
       ğŸ“¦ IMPORTS    : Tuple, deque, time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: _ENQ_MAX, _ENQ_WIN_S, _enq_lock
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 14: _rate_limit_user
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (user_id: str)
       ğŸ“¦ IMPORTS    : Tuple, deque, time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: _U_ENQ_MAX, _U_ENQ_WIN_S, _enq_user_lock
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 15: _extract_job_id
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (res: Any)
       ğŸ“¦ IMPORTS    : Any, Optional
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 16: enqueue
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : Any, Dict, ENQ_ENGINE_WINDOW_SIZE, ENQ_IDEM_HIT, ENQ_RATE_LIMIT_ENGINE, ENQ_RATE_LIMIT_USER, ENQ_TOTAL, ENQ_USER_WINDOW_SIZE, Optional, jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: _IDEM_TTL_S, queue_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 17: dequeue
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : Any, List, jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: queue_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 18: stats
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: queue_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\queue\dispatcher.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 4 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 4
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: QueueFullError
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : 

   âœ‚ï¸  CANDIDATE 2: NoEngineAvailableError
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : 

   âœ‚ï¸  CANDIDATE 3: JobDispatcher
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __init__, check_rate_limit, dispatch

   âœ‚ï¸  CANDIDATE 4: get_queue_dispatcher
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       âš ï¸ GLOBAL VARS: _dispatcher
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\rl\limiter.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 8 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 8
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _conn
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : sqlite3
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: DB_PATH
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: init_rl_schema
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()

   âœ‚ï¸  CANDIDATE 3: _now
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: allow
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (key: str, rate: float, burst: float, cost: float)
       ğŸ“¦ IMPORTS    : Tuple
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 5: RateLimitExceeded
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : 

   âœ‚ï¸  CANDIDATE 6: RateLimiter
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __init__, init_app, allow_request

   âœ‚ï¸  CANDIDATE 7: rl_allow
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (limiter: RateLimiter)
       ğŸ“¦ IMPORTS    : request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 8: rate_limit
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (limit: int, per: int, scope: str)
       ğŸ“¦ IMPORTS    : Any, wraps
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\agent.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 4 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 4
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: get_episodes
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : Episode, crypto_auth_required, current_app, g, get_user_permissions, jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: agent_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: create_episode
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : Episode, crypto_auth_required, current_app, db, g, get_user_permissions, jsonify, request, uuid
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: agent_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: start_session
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : AgentSession, Episode, RegisteredEngine, build_fac_for_owner, build_fac_for_shared_engine, crypto_auth_required, current_app, db, g, generate_password_hash, get_user_permissions, jsonify, request, secrets, socketio, uuid
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: agent_bp, engine_manager
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 4: cancel_session
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (session_id)
       ğŸ“¦ IMPORTS    : AgentSession, crypto_auth_required, current_app, db, g, jsonify, socketio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: agent_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\ai_proxy.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 8 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 8
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: get_logger
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : logging
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: get_crypto_auth
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()

   âœ‚ï¸  CANDIDATE 3: resolve_core_url
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine_id)
       ğŸ“¦ IMPORTS    : os
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: stream_with_padding
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (resp, is_council)

   âœ‚ï¸  CANDIDATE 5: _add_cors_headers
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (response)
       ğŸ“¦ IMPORTS    : request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 6: handle_ai_options
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (subpath)
       ğŸ“¦ IMPORTS    : make_response
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: ai_proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 7: ai_center_gateway_entry
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (subpath)
       âš ï¸ GLOBAL VARS: ai_proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 8: _handle_proxy_request
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (subpath)
       ğŸ“¦ IMPORTS    : Response, jsonify, os, request, requests, stream_with_context
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\capsules.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 6 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 6
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: api_capsules_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : jsonify, list_capsules
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: api_capsules_get
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (capsule_id: str)
       ğŸ“¦ IMPORTS    : get_capsule, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: api_capsules_install
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : Any, Dict, install_capsule, jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 4: api_capsules_remix
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (capsule_id: str)
       ğŸ“¦ IMPORTS    : Any, Dict, jsonify, remix_capsule, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 5: api_capsules_export
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (capsule_id: str)
       ğŸ“¦ IMPORTS    : export_capsule, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 6: api_capsules_fac_preview
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (capsule_id: str)
       ğŸ“¦ IMPORTS    : Any, Dict, fac_from_capsule, get_capsule, jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\cluster.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 5 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 5
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _parse_peers
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (env_val: str)
       ğŸ“¦ IMPORTS    : Dict
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: _public_map
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (env_val: str)
       ğŸ“¦ IMPORTS    : Dict
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: _sticky_pick
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (key: str, choices: Tuple[str, ...])
       ğŸ“¦ IMPORTS    : Optional, Tuple, hashlib
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: resolve_home
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : jsonify, os, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: cluster_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 5: health
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: cluster_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\dashboard.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 2 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 2
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _get_live_stats_from_core
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (user_id, app)
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, User, find_active_engine_session, get_db_session, globals_instance, os, requests
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: get_dashboard_summary
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, crypto_auth_required, current_app, g, get_db_session, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: dashboard_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\engine.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 3 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 3
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: register_engine
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : RegisteredEngine, crypto_auth_required, current_app, db, g, jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: engine_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: engine_auth_required
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (f)
       ğŸ“¦ IMPORTS    : RegisteredEngine, check_password_hash, current_app, g, get_db_session, globals_instance, jsonify, request, wraps
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: get_auth_whitelist
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : User, current_app, g, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: engine_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\jobs.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 3 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 3
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _rate_key
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (req)

   âœ‚ï¸  CANDIDATE 2: _rate_limited
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (req)
       ğŸ“¦ IMPORTS    : time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: _LIMIT_PER_WINDOW, _WINDOW_SECONDS, _rate_lock
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: enqueue_job
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : RATE_LIMIT_HIT, atomic_get_or_create_global, is_draining, jsonify, maybe_chaos, request, time, uuid
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: jobs_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\marketplace.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 4 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 4
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: list_items
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : MarketplaceSubmission, current_app, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: marketplace_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: publish_item
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : MarketplaceSubmission, crypto_auth_required, current_app, datetime, db, g, json, jsonify, os, request, uuid
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: MARKETPLACE_STORAGE_DIR, marketplace_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: get_item_detail
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (item_id)
       ğŸ“¦ IMPORTS    : MarketplaceSubmission, current_app, json, jsonify, os
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: MARKETPLACE_STORAGE_DIR, marketplace_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 4: install_component_proxy
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required, current_app, json, jsonify, request, urllib
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: marketplace_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\presets.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 3 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 3
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: get_presets
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : current_app, db, engine_auth_required, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: presets_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: create_preset
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : current_app, db, engine_auth_required, json, jsonify, request, uuid
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: presets_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: get_preset_detail
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (preset_id)
       ğŸ“¦ IMPORTS    : db, json, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: presets_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\proxy.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 17 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 17
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: handle_cors_options
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (f)
       ğŸ“¦ IMPORTS    : make_response, request, wraps
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: _resolve_target_engine_url
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (user, target_engine_id)
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, get_db_session, globals_instance
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: _proxy_generic_request
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (subpath)
       ğŸ“¦ IMPORTS    : Response, g, jsonify, os, request, requests
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: DEFAULT_SECRET
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 4: proxy_apps
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 5: proxy_apps_execute
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (subpath)
       ğŸ“¦ IMPORTS    : crypto_auth_required
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 6: proxy_modules
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 7: proxy_plugins
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 8: proxy_widgets
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 9: proxy_widgets_detail
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (subpath)
       âš ï¸ GLOBAL VARS: proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 10: proxy_tools
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 11: proxy_triggers
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 12: proxy_datasets
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (subpath)
       ğŸ“¦ IMPORTS    : crypto_auth_required
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 13: proxy_component_assets
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (subpath)
       âš ï¸ GLOBAL VARS: proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 14: proxy_create_custom_component
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 15: proxy_prompts
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 16: proxy_preferences
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 17: proxy_request
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (subpath)
       ğŸ“¦ IMPORTS    : crypto_auth_required, os, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: DEFAULT_SECRET, proxy_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\shares.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 3 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 3
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: get_shares_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine_id)
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, crypto_auth_required, g, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: shares_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: create_share
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, User, crypto_auth_required, current_app, db, g, generate_password_hash, jsonify, request, secrets, socketio, uuid, w3
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: shares_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: delete_share
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, crypto_auth_required, current_app, db, g, jsonify, request, socketio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: shares_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\system.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 9 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 9
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: attempt_db_recovery
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : current_app, db
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: find_active_engine_sid
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : current_app, socketio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: health_check
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : db, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: system_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 4: get_public_engines
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : OperationalError, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: system_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 5: system_browse
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : OperationalError, current_app, jsonify, request, socketio, time, uuid
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: system_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 6: get_disabled_components
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : GloballyDisabledComponent, current_app, engine_auth_required, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: system_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 7: get_all_capabilities
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (**kwargs)
       ğŸ“¦ IMPORTS    : Capability, admin_token_required, current_app, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: system_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 8: update_plan_capabilities
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (plan_id, **kwargs)
       ğŸ“¦ IMPORTS    : Capability, Plan, admin_token_required, current_app, db, jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: system_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 9: clear_system_cache
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : AgentSession, AuditLog, Episode, ExecutionMetric, Job, ScheduledTask, current_app, db, glob, jsonify, os, shutil
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: system_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\user.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 19 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 19
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _add_column_if_missing
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (column_name, column_type)
       ğŸ“¦ IMPORTS    : current_app, db, text
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: _safe_update_profile
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (user, new_bio, new_avatar)
       ğŸ“¦ IMPORTS    : OperationalError, current_app, db
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: _safe_update_preferences
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (user, prefs_json)
       ğŸ“¦ IMPORTS    : OperationalError, current_app, db
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: bootstrap_user
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : Subscription, User, current_app, db, generate_password_hash, jsonify, request, secrets, uuid, w3
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 5: update_user_profile
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : User, crypto_auth_required, current_app, db, g, jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 6: get_public_profile
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (identifier)
       ğŸ“¦ IMPORTS    : User, current_app, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 7: get_user_license
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required, current_app, datetime, g, get_user_permissions, json, jsonify, os, uuid
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 8: select_engine_for_auth
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : RegisteredEngine, crypto_auth_required, current_app, db, g, generate_password_hash, get_request_data, jsonify, pending_auths, secrets, time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 9: get_user_preferences
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required, current_app, g, json, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 10: update_user_preferences
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required, current_app, g, json, jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 11: get_user_engines
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : RegisteredEngine, crypto_auth_required, current_app, datetime, g, jsonify, time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: engine_manager, user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 12: register_new_engine
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : RegisteredEngine, crypto_auth_required, current_app, db, g, generate_password_hash, jsonify, request, secrets, uuid
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 13: delete_user_engine
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine_id)
       ğŸ“¦ IMPORTS    : RegisteredEngine, crypto_auth_required, db, g, jsonify, socketio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: engine_manager, user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 14: get_engine_shares
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine_id)
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, crypto_auth_required, g, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 15: share_engine
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine_id)
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, Subscription, User, crypto_auth_required, db, g, generate_password_hash, jsonify, request, secrets, socketio, uuid, w3
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 16: revoke_share_endpoint
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine_id, shared_user_id)
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, crypto_auth_required, db, g, jsonify, socketio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 17: reset_engine_token_legacy
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine_id)
       ğŸ“¦ IMPORTS    : RegisteredEngine, crypto_auth_required, db, g, generate_password_hash, jsonify, secrets
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 18: update_engine_name_legacy
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine_id)
       ğŸ“¦ IMPORTS    : RegisteredEngine, crypto_auth_required, db, g, jsonify, request, time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: engine_manager, user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 19: get_shared_engines
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, User, crypto_auth_required, current_app, datetime, db, g, jsonify, time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: engine_manager, user_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\user_state.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 8 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 8
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: get_favorite_presets
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : State, crypto_auth_required, current_app, g, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: FAVORITE_PRESETS_KEY, user_state_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: set_favorite_presets
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : State, crypto_auth_required, current_app, db, g, jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: FAVORITE_PRESETS_KEY, user_state_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: get_favorite_components
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : State, crypto_auth_required, current_app, g, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: FAVORITE_COMPONENTS_KEY, user_state_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 4: set_favorite_components
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : State, crypto_auth_required, current_app, db, g, jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: FAVORITE_COMPONENTS_KEY, user_state_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 5: get_active_widgets
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : State, crypto_auth_required, current_app, g, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: ACTIVE_WIDGETS_KEY, user_state_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 6: set_active_widgets
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : State, crypto_auth_required, current_app, db, g, jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: ACTIVE_WIDGETS_KEY, user_state_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 7: get_active_apps
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : State, crypto_auth_required, current_app, g, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: ACTIVE_APPS_KEY, user_state_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 8: set_active_apps
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : State, crypto_auth_required, current_app, db, g, jsonify, request
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: ACTIVE_APPS_KEY, user_state_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\variables.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 2 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 2
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: handle_root_variables
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (user)
       ğŸ“¦ IMPORTS    : current_app, jsonify, login_required, request, requests
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: CORE_URL, variables_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: handle_variable_key
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (user, key)
       ğŸ“¦ IMPORTS    : current_app, jsonify, login_required, request, requests
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: CORE_URL, variables_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\workflow_shares.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 6 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 6
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _check_preset_exists_in_core
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (user_id, preset_name)
       ğŸ“¦ IMPORTS    : User, Workflow, current_app, db, find_active_engine_session, globals_instance, os, requests
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: get_workflow_shares
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (workflow_name)
       ğŸ“¦ IMPORTS    : Workflow, WorkflowShare, crypto_auth_required, g, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: workflow_shares_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: create_workflow_share
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (workflow_name)
       ğŸ“¦ IMPORTS    : Workflow, WorkflowShare, crypto_auth_required, current_app, db, g, get_request_data, jsonify, secrets, traceback, uuid
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: workflow_shares_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 4: update_workflow_share
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (share_id)
       ğŸ“¦ IMPORTS    : Workflow, WorkflowShare, crypto_auth_required, db, g, get_request_data, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: workflow_shares_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 5: delete_workflow_share
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (share_id)
       ğŸ“¦ IMPORTS    : Workflow, WorkflowShare, crypto_auth_required, db, g, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: workflow_shares_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 6: resolve_share_token
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (share_token)
       ğŸ“¦ IMPORTS    : Workflow, WorkflowShare, db, joinedload, jsonify
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: workflow_shares_bp
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\routes\auth\__init__.py
ğŸ·ï¸  STATUS: LEGACY HUB / ROUTER
ğŸ“Š BEBAN : 5 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 5
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: AuthHub
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __init__, execute

   âœ‚ï¸  CANDIDATE 2: register
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : ()
       âš ï¸ GLOBAL VARS: auth_bp, hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 3: login
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : ()
       âš ï¸ GLOBAL VARS: auth_bp, hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 4: handle_logout
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: auth_bp, hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 5: get_profile
       ğŸ“ Type       : âš¡ ASYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : crypto_auth_required
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: auth_bp, hub
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\security\env_guard.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 4 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 4
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: check_strict_env
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : os, sys
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: _truthy
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (v: Optional[str])
       ğŸ“¦ IMPORTS    : Optional
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: assert_secret
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (varname: str, min_len: int)
       ğŸ“¦ IMPORTS    : os
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: _BAD_SECRETS
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 4: guard_runtime
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : Any, Dict, os
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\security\fac_utils.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 6 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 6
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _get_fac_signing_key_bytes
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       âš ï¸ GLOBAL VARS: FAC_SIGNING_KEY
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 2: _serialize_fac_for_signing
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (fac_dict: Dict[str, Any])
       ğŸ“¦ IMPORTS    : Any, Dict, json
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: sign_fac_dict
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (fac_dict: Dict[str, Any])
       ğŸ“¦ IMPORTS    : Any, Dict, base64, hashlib, hmac
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: FAC_SIGNING_KEY
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 4: verify_fac_signature
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (fac_dict: Dict[str, Any])
       ğŸ“¦ IMPORTS    : Any, Dict, base64, hashlib, hmac
                       (ğŸ‘‰ Wajib copy import ini ke file baru)
       âš ï¸ GLOBAL VARS: FAC_SIGNING_KEY
                       (ğŸ‘‰ PENTING: Fungsi ini baca variabel global file asli)

   âœ‚ï¸  CANDIDATE 5: validate_fac_ttl
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (fac_dict: Dict[str, Any], max_ttl_seconds: int)
       ğŸ“¦ IMPORTS    : Any, Dict, time
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 6: validate_fac_budget
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (fac_dict: Dict[str, Any], max_budget: int)
       ğŸ“¦ IMPORTS    : Any, Dict
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\security\guards.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 3 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 3
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: gateway_token_required
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (f)
       ğŸ“¦ IMPORTS    : current_app, jsonify, os, request, wraps
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: admin_token_required
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (f)
       ğŸ“¦ IMPORTS    : current_app, g, get_jwt, jsonify, request, verify_jwt_in_request, wraps
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: login_required
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (f)
       ğŸ“¦ IMPORTS    : current_app, jsonify, verify_jwt_in_request, wraps
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\security\logging_setup.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 4 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 4
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: RedactionFilter
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : __init__, filter

   âœ‚ï¸  CANDIDATE 2: JsonFormatter
       ğŸ“ Type       : ğŸ›ï¸ CLASS
       ğŸ”§ Methods    : format

   âœ‚ï¸  CANDIDATE 3: configure_logging
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : logging, os, sys
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: fac_summary
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (fac: Dict[str, Any])
       ğŸ“¦ IMPORTS    : Any, Dict
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\sockets\agent_handlers.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 11 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 11
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: on_request_settings
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: on_save_settings
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: on_update_variable
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: on_delete_variable
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 5: on_request_prompts_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 6: on_update_prompt
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 7: on_delete_prompt
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 8: on_request_ai_status
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 9: on_request_datasets_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 10: on_request_local_models
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 11: on_request_training_job_status
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\sockets\engine_handlers.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 24 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 24
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: on_engine_connect
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (auth)
       ğŸ“¦ IMPORTS    : RegisteredEngine, check_password_hash, current_app, get_db_session, globals_instance, join_room, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: on_engine_disconnect
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : AgentSession, UserEngineSession, _broadcast_response, _safe_get_session, current_app, datetime, get_db_session, globals_instance, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: handle_engine_ready
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : UserEngineSession, _broadcast_response, _safe_get_session, current_app, datetime, get_db_session, globals_instance, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: handle_engine_vitals_update
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : UserEngineSession, _broadcast_response, _safe_get_session, current_app, datetime, find_active_engine_session, get_db_session, globals_instance, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 5: handle_engine_log
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _broadcast_response, _safe_get_session, current_app, datetime, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 6: on_engine_response_component_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _broadcast_response, _emit_to_gui, _safe_get_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 7: on_engine_response_variables
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _broadcast_response, _emit_to_gui, _safe_get_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 8: on_engine_response_presets_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _broadcast_response, _emit_to_gui, _safe_get_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 9: on_engine_response_ai_status
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _broadcast_response, _emit_to_gui, _safe_get_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 10: on_engine_response_datasets_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _broadcast_response, _emit_to_gui, _safe_get_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 11: on_engine_response_local_models
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _broadcast_response, _emit_to_gui, _safe_get_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 12: on_engine_response_training_job_status
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _broadcast_response, _emit_to_gui, _safe_get_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 13: on_engine_component_install_status
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _broadcast_response, _emit_to_gui, _safe_get_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 14: on_engine_response_settings
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _broadcast_response, _emit_to_gui, _safe_get_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 15: on_engine_filesystem_response
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _emit_to_gui, _safe_get_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 16: on_forward_event_to_gui
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _broadcast_response, _safe_get_session, current_app, g_engine_active_job, g_execution_ownership, g_job_ownership, globals_instance, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 17: on_engine_response_load_preset
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _broadcast_response, _emit_to_gui, _safe_get_session, current_app, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 18: on_core_agent_status
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : AgentSession, current_app, get_db_session, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 19: on_core_agent_token
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _redact_content, current_app, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 20: on_core_agent_tool
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 21: on_core_agent_done
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : AgentSession, Episode, current_app, datetime, get_db_session, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 22: on_core_agent_error
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : AgentSession, current_app, datetime, get_db_session, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 23: on_core_request_swarm_task
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _safe_get_session, current_app, g_swarm_task_registry, globals_instance, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 24: on_core_swarm_task_result
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, g_swarm_task_registry, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\sockets\gui_handlers.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 5 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 5
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: on_gui_connect
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (auth)
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, User, current_app, datetime, generate_password_hash, get_db_session, globals_instance, join_room, joinedload, json, request, secrets, sio, uuid, verify_web3_signature
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: on_gui_disconnect
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : ()
       ğŸ“¦ IMPORTS    : _safe_get_session, current_app, leave_room, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: on_gui_join_session
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : AgentSession, EngineShare, _safe_get_session, check_password_hash, current_app, get_db_session, join_room, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: on_gui_input
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : AgentSession, _safe_get_session, current_app, get_db_session, globals_instance, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 5: on_gui_catch_all
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (event, data)
       ğŸ“¦ IMPORTS    : sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\sockets\utils.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 7 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 7
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: _redact_content
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (text: str)
       ğŸ“¦ IMPORTS    : re
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: _safe_get_session
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (sid: str, namespace: str)
       ğŸ“¦ IMPORTS    : sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: _inject_fac_if_needed
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (session, user_id: str, engine_id: str, payload: dict)
       ğŸ“¦ IMPORTS    : RegisteredEngine, User, build_fac_for_shared_engine
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: _broadcast_response
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (engine_id: str, event_name: str, data)
       ğŸ“¦ IMPORTS    : EngineShare, RegisteredEngine, current_app, get_db_session, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 5: _resolve_sid_via_share_token
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (session, share_token)
       ğŸ“¦ IMPORTS    : WorkflowShare, current_app, find_active_engine_session, globals_instance, joinedload
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 6: _emit_to_gui
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (user_id: str, event_name: str, data)
       ğŸ“¦ IMPORTS    : current_app, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 7: _resolve_target_engine_sid
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (session, user_id, target_engine_id)
       ğŸ“¦ IMPORTS    : current_app, find_active_engine_session, globals_instance
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


----------------------------------------------------------------------------------------------------
ğŸš¨ PASIEN: C:\FLOWORK\flowork-gateway\app\sockets\workflow_handlers.py
ğŸ·ï¸  STATUS: MONOLITH FILE
ğŸ“Š BEBAN : 16 Fungsi/Class Utama (Perlu dipecah)
ğŸ“Š PECAH FILE INI MENJADI  : 16
Prinsip Utama 

1. Dynamic Component Discovery (DCD): Hub wajib melakukan scanning file secara otomatis.
2. Lazy Loading: Modul hanya di-import ke RAM saat dipanggil (On-Demand).
3. Atomic Isolation: 1 File = 1 Fungsi dengan nama file yang identik dengan nama fungsi aslinya.
4. Zero Logic Mutation: Dilarang merubah alur logika, nama variabel, atau struktur if/try/loop.

Instruksi Kerja (The Hub):

Ubah file target menjadi folder package dengan __init__.py.
Gunakan importlib untuk loading dinamis.
PENTING: Hub wajib mendukung Positional Arguments agar panggilannya identik. Gunakan signature: async def execute(self, cell_name, args, kwargs).

Instruksi Kerja (Atomic Cells):

Pecah fungsi berikut menjadi file mandiri: [DAFTAR FUNGSI DI SINI]
Entry Point Wajib: Gunakan async def run(hub, args, kwargs).
Transplantasi Kode 1:1: Ambil isi batang tubuh (body) fungsi asli dan tempel langsung ke dalam run.
Variable Mapping: - Ubah referensi global (seperti APP_ID, sio, logger) menjadi hub.APP_ID, hub.sio, hub.logger.
Ubah pemanggilan fungsi internal (seperti await process_action(...)) menjadi await hub.execute(process_action, ...) dengan urutan argumen yang sama persis.
PERINGATAN KERAS:

Gunakan metode penguapan (Transplantasi Kode). Jangan menulis ulang (rewrite). Ambil isi fungsi X dari baris A sampai B, lalu tempel ke fungsi run() di file baru. Jika saya menemukan satu variabel saja yang namanya berubah, satu pesan log yang dipotong, atau satu logika 'if' yang lu optimasi, kerjaan lu GAGAL dan akan ditolak oleh SurgeryValidator V3.5.
----------------------------------------------------------------------------------------------------

   âœ‚ï¸  CANDIDATE 1: on_join_workflow_room
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _safe_get_session, current_app, join_room, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 2: on_engine_log_relay
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, g_execution_ownership, g_job_ownership, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 3: on_node_status_relay
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, g_execution_ownership, g_job_ownership, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 4: on_execution_update_relay
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, g_execution_ownership, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 5: on_engine_load_preset_relay
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 6: on_request_presets_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 7: on_request_variables
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 8: on_request_components_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 9: on_response_component_list
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 10: on_execute_workflow
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, g_execution_ownership, g_job_ownership, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 11: on_save_preset
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : Workflow, _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, db, get_db_session, request, sio, uuid
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 12: on_load_preset
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : RegisteredEngine, _inject_fac_if_needed, _resolve_sid_via_share_token, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 13: on_delete_preset
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 14: on_install_component
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 15: on_uninstall_component
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : _inject_fac_if_needed, _resolve_target_engine_sid, _safe_get_session, current_app, get_db_session, request, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)

   âœ‚ï¸  CANDIDATE 16: on_forward_event_to_gui
       ğŸ“ Type       : ğŸ”¹ SYNC
       ğŸ“¥ Params     : (data)
       ğŸ“¦ IMPORTS    : current_app, g_execution_ownership, g_job_ownership, sio
                       (ğŸ‘‰ Wajib copy import ini ke file baru)


====================================================================================================
ğŸ›‘ TOTAL PASIEN YANG HARUS DIBEDAH: 54
====================================================================================================
